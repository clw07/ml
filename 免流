p: &p
  type: http
  interval: 3600
  health-check:
    enable: true
    url: 'http://www.apple.com/library/test/success.html'
    interval: 300
    timeout: 2000
    tolerance: 30

mode: rule
log-level: debug
allow-lan: true
mixed-port: 7890
unified-delay: true
find-process-mode: strict
keep-alive-interval: 1800
geo-update-interval: 24
geo-auto-update: false
udp: true
ipv6: true
tcp-fast-open: true
geodata-mode: true
tcp-concurrent: true
geodata-loader: standard
global-client-fingerprint: android
profile:
  store-selected: true
  store-fake-ip: true
tun:
  enable: true
  stack: system
  auto-route: true
  auto-redir: true
  auto-detect-interface: true
  dns-hijack:
    - "any:53"
    - "tcp://any:53"

dns:
  cache-algorithm: arc
  enable: true # å¯ç”¨è‡ªå®šä¹‰ DNS
  prefer-h3: false # æ˜¯å¦å¼€å¯ DoH æ”¯æŒ HTTP/3ï¼Œå°†å¹¶å‘å°è¯•
  listen: 0.0.0.0:53 # å¼€å¯ DNS æœåŠ¡å™¨ç›‘å¬
  # ipv6: false # false å°†è¿”å› AAAA çš„ç©ºç»“æœ
  # ipv6-timeout: 300 # å•ä½ï¼šmsï¼Œå†…éƒ¨åŒæ ˆå¹¶å‘æ—¶ï¼Œå‘ä¸Šæ¸¸æŸ¥è¯¢ AAAA æ—¶ï¼Œç­‰å¾… AAAA çš„æ—¶é—´ï¼Œé»˜è®¤ 100ms
  default-nameserver:
    - 114.114.114.114
    - 8.8.8.8
    - tls://1.12.12.12:853
    - tls://223.5.5.5:853
    - system # è¿½åŠ ç³»ç»Ÿ DNS é…ç½®
  enhanced-mode: fake-ip # ä½¿ç”¨ fake-ip æ¨¡å¼

  fake-ip-range: 198.18.0.1/16 # fake-ip æ± è®¾ç½®

  # é…ç½®ä¸ä½¿ç”¨ fake-ip çš„åŸŸå
  fake-ip-filter:
    - '*.lan'
    - localhost.ptlogin2.qq.com
    
    
  
  # ä¸»è¦ DNS é…ç½®
  nameserver:
    - 114.114.114.114 # å›½å†… DNS
    - 223.5.5.5 # é˜¿é‡Œ DNS
    - tls://223.5.5.5:853 # DNS over TLS
    - https://doh.pub/dns-query # å›½å†… DoH
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ DoH
    - dhcp://en0 # ä» DHCP è·å– DNS

  # Fallback DNS é…ç½®ï¼Œç”¨äºè§£æå›½å¤–åŸŸå
  fallback:
    - tls://1.1.1.1:853 # Cloudflare DNS over TLS
    - tls://8.8.8.8:853 # Google DNS over TLS
    - https://dns.google/dns-query # Google DoH
    - https://mozilla.cloudflare-dns.com/dns-query # Cloudflare DoH
    - quic://dns.adguard.com:784 # DNS over QUIC
  direct-nameserver:
    - system://
  direct-nameserver-follow-policy: false # æ˜¯å¦

  # é…ç½® fallback ä½¿ç”¨æ¡ä»¶
  fallback-filter:
    geoip: true # ä½¿ç”¨ geoip åˆ¤æ–­
    geoip-code: CN # å½“ IP å±äº CN æ—¶ï¼Œä¸ä½¿ç”¨ fallback
    geosite:
      - gfw # å¼ºåˆ¶å¯¹ gfw åˆ—è¡¨ä¸­çš„åŸŸåä½¿ç”¨ fallback
    ipcidr:
      - 240.0.0.0/4
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'

  # é…ç½®æŸ¥è¯¢åŸŸåä½¿ç”¨çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    "geosite:cn":
      - 114.114.114.114
      - 223.5.5.5
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
    "geosite:category-ads-all": rcode://success # å±è”½å¹¿å‘ŠåŸŸå
    "www.baidu.com,+.google.cn":
      - 223.5.5.5
      - https://dns.alidns.com/dns-query
    "geosite:geolocation-!cn": # å›½å¤–åŸŸåä½¿ç”¨ fallback
      - tls://1.1.1.1:853
      - tls://8.8.8.8:853
      - https://dns.google/dns-query
      - https://mozilla.cloudflare-dns.com/dns-query


proxy-providers:
  å…æµ:
    type: http
    url: "https://raw.githubusercontent.com/clw07/ml/main/å…æµ.yaml"
    path: ./ProxyProviders/å…æµ.yaml
    header:
      User-Agent:
        - "Clash/v1.18.0"
        - "mihomo/v1.18.5"
        - "Clash.Meta/v2.10.2"
        - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.66 Safari/537.36"  # æ·»åŠ æ–°çš„ User-Agent
    <<: *p  # å¼•ç”¨ p å‚æ•°
    lazy: false
    timeout: 5000  # è®¾ç½®ä¸º 5 ç§’
  æ€§ä»·æ¯”:
    type: http
    url: "https://proxyinfo.net/api/v1/client/subscribe?token=1327869edc6c0bd6802060e4e1b67be5"
    path: ./ProxyProviders/æ€§ä»·æ¯”.yaml
    header:
      User-Agent:
        - "Clash/v1.18.0"
        - "mihomo/v1.18.5"
        - "Clash.Meta/v2.10.2"
        - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.66 Safari/537.36"  # æ·»åŠ æ–°çš„ User-Agent
    <<: *p  # å¼•ç”¨ p å‚æ•°
    lazy: false
    timeout: 5000  # è®¾ç½®ä¸º 5 ç§’
  

proxy-groups:
  - name: proxy
    type: select
    proxies:
      - å›½å¤–
      - å›½å¤–è‡ªåŠ¨
    icon: "https://raw.githubusercontent.com/NB921/picture/main/Golbal.png"

  - name: domestic
    type: select
    proxies:
      - å›½å†…
      - å›½å†…è‡ªåŠ¨
      - proxy
      - DIRECT
    icon: "https://raw.githubusercontent.com/NB921/picture/main/Sdxz.png"

  - name: å›½å†…
    type: select
    use:
      - å…æµ 
      
    filter: "(?i)CN|å¾|æ­¦|æµ|é•‡|åŒ—"
    icon: "https://raw.githubusercontent.com/NB921/picture/main/Health.png"
    lazy: false

  - name: å›½å†…è‡ªåŠ¨
    type: url-test
    <<: *p  # å¼•ç”¨ p å‚æ•°
    use:
      - å…æµ 
      
    filter: "(?i)CN|å¾|æ­¦|æµ|é•‡|åŒ—"
    lazy: false
  - name: å›½å¤–
    type: select
    use:
      - å…æµ 
      - æ€§ä»·æ¯”
    exclude-filter: "(?i)CN|å¾|æ­¦|æµ|å·|ç¦æ­¢|å®˜ç½‘|ä»¥ä¸‹|å‰©ä½™|åˆ°æœŸ|tg|é•‡|åŒ—"
    lazy: false
    icon: "https://raw.githubusercontent.com/NB921/picture/main/Golbal.png"

  - name: å›½å¤–è‡ªåŠ¨
    type: url-test
    <<: *p  # å¼•ç”¨ p å‚æ•°
    use:
      - å…æµ 
      - æ€§ä»·æ¯”
    exclude-filter: "(?i)CN|å¾|æ­¦|æµ|å·|ç¦æ­¢|å®˜ç½‘|ä»¥ä¸‹|å‰©ä½™|åˆ°æœŸ|tg|é•‡|åŒ—"
    lazy: false
  - name: ğŸ›‘ AdBlock
    type: select
    proxies:
      - REJECT
      
      - å›½å¤–
    icon: "https://raw.githubusercontent.com/NB921/picture/main/Yu.png"

rules:
  - RULE-SET,anti-ad,ğŸ›‘ AdBlock
  - DOMAIN,mcdn.bilivideo.cn,REJECT
  - DOMAIN,tracker.biliapi.net,REJECT
  - DOMAIN-SUFFIX,chat.bilibili.com,REJECT
  - DOMAIN-SUFFIX,szbdyd.com,REJECT
  - DOMAIN,dig.bdurl.net,REJECT
  - DOMAIN,g.cn.miaozhen.com,REJECT
  - DOMAIN,im-x.jd.com,REJECT
  - DOMAIN,ads3-normal-lq.zijieapi.com,REJECT
  - DOMAIN,log-api.pangolin-sdk-toutiao-b.com,REJECT
  - DOMAIN,tobapplog.ctobsnssdk.com,REJECT
  - DOMAIN,toblog.ctobsnssdk.com,REJECT
  - DOMAIN,api-access.pangolin-sdk-toutiao.com.cn,REJECT
  - DOMAIN,dig.zjurl.cn.cn,REJECT
  #- DOMAIN-SUFFIX,.xn--ngstr-lra8j.com,proxy
  #- DOMAIN-SUFFIX,.googleapis.cn,proxy
  #- DOMAIN-SUFFIX,.dev,proxy
  - GEOSITE,youtube,proxy
  - OR,((GEOSITE,PRIVATE),(GEOIP,PRIVATE,NO-RESOLVE)),DIRECT
  
 
  - GEOSITE,CN,domestic
  - GEOIP,CN,domestic
  - GEOSITE,category-ads-all,ğŸ›‘ AdBlock
  
  - RULE-SET,ç§‹é£å¹¿å‘Šè§„åˆ™,ğŸ›‘ AdBlock
  - RULE-SET,OpenAI,proxy
  
  - MATCH,proxy
  - MATCH,REJECT

rule-providers:
  anti-ad:
    type: http
    behavior: domain
    url: https://anti-ad.net/clash.yaml
    path: ./Rules/anti-ad
    interval: 60000

  ç§‹é£å¹¿å‘Šè§„åˆ™:
    type: http
    behavior: domain
    format: yaml
    path: ./Rules/AWAvenue-Ads-Rule-Clash
    url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.yaml"
    interval: 60480

  OpenAI:
    type: http
    behavior: classical
    format: yaml
    path: ./Rules/OpenAI
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml"

    interval: 60480
 